# 真正全自动AI系统

## 项目简介

这是一个真正全自动的AI系统，用户只需输入需求，系统就能全自动完成所有工作。系统集成了模型选择、提示词优化、任务执行、结果评估和报告生成等完整流程，实现了端到端的AI自动化处理。

**注意：当前项目已经整合了早期开发阶段的所有功能模块，形成了一个统一的全自动AI系统。**

## 核心功能

### 1. 全自动任务处理流程
- **需求输入**：用户只需输入自然语言需求
- **智能文件解析**：自动识别并读取请求中引用的本地文件，提供更清晰的文件内容标识
- **智能模型选择**：AI自动分析任务并选择最适合的模型
- **提示词优化**：AI自动生成优化的提示词
- **任务执行**：调用AI模型执行具体任务
- **结果评估**：AI自动评估执行结果质量
- **智能文件保存**：根据内容类型自动选择合适的文件格式和扩展名

### 2. 智能模型管理
- 支持多种阿里云百炼平台Qwen模型
- AI自动根据任务复杂度选择最适合的模型
- 实时获取平台真实的token使用数据
- 避免模型过载，确保稳定运行

### 3. 多格式文件支持
- **代码文件**：Python、Java、JavaScript、C++、PHP等
- **文档文件**：Markdown、纯文本
- **自动格式识别**：根据内容类型自动选择合适格式
- **文件名优化**：自动生成合法且有意义的文件名

### 4. 完整报告系统
- 任务执行综合报告
- 模型选择分析
- Token使用统计（平台真实数据）
- 结果质量评估

## 系统架构

```
+-------------------+
|   用户需求输入    |
+-------------------+
          |
          v
+-------------------+
|  需求解析与文件读取 |
+-------------------+
          |
          v
+-------------------+
| AI智能模型选择模块 |
+-------------------+
          |
          v
+-------------------+
| AI提示词生成模块  |
+-------------------+
          |
          v
+-------------------+
|   AI任务执行模块   |
+-------------------+
          |
          v
+-------------------+
|  结果评估与处理模块 |
+-------------------+
          |
          v
+-------------------+
|   文件保存模块    |
+-------------------+
```

## 使用方法

### 1. 环境配置
```bash
# 1. 安装依赖
pip install -r requirements.txt

# 2. 配置API密钥
cp .env.example .env
# 编辑.env文件，填入您的阿里云API密钥
```

### 2. 运行系统
```bash
python main.py
```

### 3. 输入需求示例
```
请分析[file:report.txt]中的内容并生成总结报告
```

系统将全自动完成：
1. 读取report.txt文件
2. 分析任务类型和复杂度
3. 自动选择最适合的AI模型
4. 生成优化提示词
5. 执行任务并生成总结报告
6. 评估结果质量
7. 保存所有生成文件
8. 生成详细执行报告

## 文件引用语法

在任何请求中使用以下语法引用本地文件：
```
[file:文件路径]
```

示例：
- `[file:document.txt]`
- `[file:./data/report.pdf]`
- `[file:/home/user/input.md]`

系统会自动读取这些文件，并在请求中以清晰的标识展示文件内容：
```
[文件内容开始:文件路径]
...文件内容...
[文件内容结束:文件路径]
```

这种方式帮助AI更好地理解和利用文件内容来完成任务。

## 支持的模型

系统支持阿里云百炼平台上的多种Qwen模型：

- **qwen-turbo**：快速处理简单任务
- **qwen-plus**：平衡处理中等复杂任务
- **qwen-max**：强大处理复杂任务
- **qwen-long**：处理超长文本

AI会根据任务需求自动选择最适合的模型，用户也可以通过修改环境变量来配置默认模型。

## 生成的文件类型

系统会自动生成以下三种类型的文件：

### 1. 结果文件
AI任务执行的主要结果，根据内容类型自动选择格式：
- 代码内容：.py、.java、.js等
- 文档内容：.md、.txt等

### 2. 提示词文件
AI用于执行任务的优化提示词，保存为Markdown格式：
- 文件名格式：`AI提示词_{关键词}_{时间戳}.md`

### 3. 执行报告
包含任务详细信息的综合报告：
- 原始请求和执行时间
- 模型选择分析
- Token使用统计（平台真实数据）
- 结果质量评估
- 文件名格式：`AI执行报告_{关键词}_{时间戳}.md`

## 项目结构

```
AI/
├── main.py                 # 系统主程序（整合了所有功能）
├── model_manager.py        # 模型管理器
├── requirements.txt        # 依赖包列表
├── .env.example           # 环境变量配置示例
├── .env                   # 环境变量配置（需手动创建）
└── README.md              # 项目说明文档
```

## 技术特点

### 1. 真实数据驱动
- 所有Token使用数据均为平台返回的真实计量数据
- 根据阿里云百炼平台API文档获取usage字段信息
- 总Token数量 = 输入Token数 + 输出Token数

### 2. 智能内容识别
- 自动识别代码内容并选择合适编程语言格式
- 自动识别Markdown内容并保存为.md文件
- 其他内容默认保存为.txt文件

### 3. 完善的错误处理
- 网络异常处理
- API调用错误处理
- 文件读写错误处理
- 模型选择失败处理
- JSON解析错误处理

### 4. 模块化设计
- 核心功能模块化，便于维护和扩展
- 清晰的类和方法设计
- 详细的代码注释

## 依赖说明

- `openai>=1.0.0`：阿里云百炼平台API调用
- `python-dotenv>=0.19.0`：环境变量管理
- `PyYAML>=6.0`：YAML配置文件解析
- `Jinja2>=3.1.0`：提示词模板渲染
- `requests>=2.28.0`：HTTP请求处理
- `reportlab>=3.6.0`：PDF报告生成（预留功能）

## 开发与维护

本项目采用简洁的设计理念，所有核心功能都集成在main.py中，便于理解和维护。model_manager.py负责模型管理和token统计，prompt_templates.yaml提供提示词模板支持。

## 许可证

本项目基于 Alan Global Copyright Protection Agreement (AGCPA v3.0) 开源协议进行授权。© 2024-2025 Alan. 全球保留所有权利。

详细协议内容请参阅 [AGCPA v3.0.md](https://ima.qq.com/note/share?shareId=_AseMbuM8w6eLpIXZlZgMg) 文件或访问官方链接了解详细信息：https://ima.qq.com/note/share?shareId=_AseMbuM8w6eLpIXZlZgMg